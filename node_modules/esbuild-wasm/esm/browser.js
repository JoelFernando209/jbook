function re(e){let r=s=>{if(s===null)t.write8(0);else if(typeof s=="boolean")t.write8(1),t.write8(+s);else if(typeof s=="number")t.write8(2),t.write32(s|0);else if(typeof s=="string")t.write8(3),t.write(W(s));else if(s instanceof Uint8Array)t.write8(4),t.write(s);else if(s instanceof Array){t.write8(5),t.write32(s.length);for(let o of s)r(o)}else{let o=Object.keys(s);t.write8(6),t.write32(o.length);for(let i of o)t.write(W(i)),r(s[i])}},t=new ee;return t.write32(0),t.write32(e.id<<1|+!e.isRequest),r(e.value),te(t.buf,t.len-4,0),t.buf.subarray(0,t.len)}function ae(e){let r=()=>{switch(t.read8()){case 0:return null;case 1:return!!t.read8();case 2:return t.read32();case 3:return V(t.read());case 4:return t.read();case 5:{let y=t.read32(),p=[];for(let a=0;a<y;a++)p.push(r());return p}case 6:{let y=t.read32(),p={};for(let a=0;a<y;a++)p[V(t.read())]=r();return p}default:throw new Error("Invalid packet")}},t=new ee(e),s=t.read32(),o=(s&1)===0;s>>>=1;let i=r();if(t.ptr!==e.length)throw new Error("Invalid packet");return{id:s,isRequest:o,value:i}}var ee=class{constructor(r=new Uint8Array(1024)){this.buf=r;this.len=0;this.ptr=0}_write(r){if(this.len+r>this.buf.length){let t=new Uint8Array((this.len+r)*2);t.set(this.buf),this.buf=t}return this.len+=r,this.len-r}write8(r){let t=this._write(1);this.buf[t]=r}write32(r){let t=this._write(4);te(this.buf,r,t)}write(r){let t=this._write(4+r.length);te(this.buf,r.length,t),this.buf.set(r,t+4)}_read(r){if(this.ptr+r>this.buf.length)throw new Error("Invalid packet");return this.ptr+=r,this.ptr-r}read8(){return this.buf[this._read(1)]}read32(){return ne(this.buf,this._read(4))}read(){let r=this.read32(),t=new Uint8Array(r),s=this._read(t.length);return t.set(this.buf.subarray(s,s+r)),t}},W,V;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,r=new TextDecoder;W=t=>e.encode(t),V=t=>r.decode(t)}else if(typeof Buffer!="undefined")W=e=>Buffer.from(e),V=e=>Buffer.from(e).toString();else throw new Error("No UTF-8 codec found");function ne(e,r){return e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24}function te(e,r,t){e[t++]=r,e[t++]=r>>8,e[t++]=r>>16,e[t++]=r>>24}function ue(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var P=e=>typeof e=="boolean"?null:"a boolean",g=e=>typeof e=="string"?null:"a string",fe=e=>e instanceof RegExp?null:"a RegExp object",z=e=>typeof e=="number"&&e===(e|0)?null:"an integer",we=e=>typeof e=="function"?null:"a function",L=e=>Array.isArray(e)?null:"an array",G=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",be=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",le=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",ve=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",Re=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",xe=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function n(e,r,t,s){let o=e[t];if(r[t+""]=!0,o===void 0)return;let i=s(o);if(i!==null)throw new Error(`"${t}" must be ${i}`);return o}function j(e,r){for(let t in e)if(!(t in r))throw new Error(`Invalid option: "${t}"`)}function Q(e,r,t,s,o){let i=n(r,t,"color",P),y=n(r,t,"logLevel",g),p=n(r,t,"errorLimit",z);i?e.push(`--color=${i}`):s&&e.push("--color=true"),e.push(`--log-level=${y||o}`),e.push(`--error-limit=${p||0}`)}function ce(e,r,t){let s=n(r,t,"target",Re),o=n(r,t,"format",g),i=n(r,t,"globalName",g),y=n(r,t,"minify",P),p=n(r,t,"minifySyntax",P),a=n(r,t,"minifyWhitespace",P),S=n(r,t,"minifyIdentifiers",P),k=n(r,t,"charset",g),I=n(r,t,"treeShaking",le),E=n(r,t,"jsxFactory",g),A=n(r,t,"jsxFragment",g),C=n(r,t,"define",G),q=n(r,t,"pure",L),N=n(r,t,"avoidTDZ",P),K=n(r,t,"keepNames",P),M=n(r,t,"banner",g),c=n(r,t,"footer",g);if(s&&(Array.isArray(s)?e.push(`--target=${Array.from(s).map(ue).join(",")}`):e.push(`--target=${ue(s)}`)),o&&e.push(`--format=${o}`),i&&e.push(`--global-name=${i}`),y&&e.push("--minify"),p&&e.push("--minify-syntax"),a&&e.push("--minify-whitespace"),S&&e.push("--minify-identifiers"),k&&e.push(`--charset=${k}`),I!==void 0&&I!==!0&&e.push(`--tree-shaking=${I}`),E&&e.push(`--jsx-factory=${E}`),A&&e.push(`--jsx-fragment=${A}`),C)for(let u in C){if(u.indexOf("=")>=0)throw new Error(`Invalid define: ${u}`);e.push(`--define:${u}=${C[u]}`)}if(q)for(let u of q)e.push(`--pure:${u}`);N&&e.push("--avoid-tdz"),K&&e.push("--keep-names"),M&&e.push(`--banner=${M}`),c&&e.push(`--footer=${c}`)}function Oe(e,r,t,s){var w;let o=[],i=Object.create(null),y=null,p=null;Q(o,e,i,r,t),ce(o,e,i);let a=n(e,i,"sourcemap",le),S=n(e,i,"bundle",P),k=n(e,i,"splitting",P),I=n(e,i,"metafile",g),E=n(e,i,"outfile",g),A=n(e,i,"outdir",g),C=n(e,i,"outbase",g),q=n(e,i,"platform",g),N=n(e,i,"tsconfig",g),K=n(e,i,"resolveExtensions",L),M=n(e,i,"mainFields",L),c=n(e,i,"external",L),u=n(e,i,"loader",G),f=n(e,i,"outExtension",G),b=n(e,i,"publicPath",g),F=n(e,i,"inject",L),T=n(e,i,"entryPoints",L),R=n(e,i,"stdin",G),h=(w=n(e,i,"write",P))!=null?w:s,m=n(e,i,"incremental",P)===!0,x=n(e,i,"plugins",L);if(j(e,i),a&&o.push(`--sourcemap${a===!0?"":`=${a}`}`),S&&o.push("--bundle"),k&&o.push("--splitting"),I&&o.push(`--metafile=${I}`),E&&o.push(`--outfile=${E}`),A&&o.push(`--outdir=${A}`),C&&o.push(`--outbase=${C}`),q&&o.push(`--platform=${q}`),N&&o.push(`--tsconfig=${N}`),K){let l=[];for(let d of K){if(d+="",d.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${d}`);l.push(d)}o.push(`--resolve-extensions=${l.join(",")}`)}if(b&&o.push(`--public-path=${b}`),M){let l=[];for(let d of M){if(d+="",d.indexOf(",")>=0)throw new Error(`Invalid main field: ${d}`);l.push(d)}o.push(`--main-fields=${l.join(",")}`)}if(c)for(let l of c)o.push(`--external:${l}`);if(F)for(let l of F)o.push(`--inject:${l}`);if(u)for(let l in u){if(l.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${l}`);o.push(`--loader:${l}=${u[l]}`)}if(f)for(let l in f){if(l.indexOf("=")>=0)throw new Error(`Invalid out extension: ${l}`);o.push(`--out-extension:${l}=${f[l]}`)}if(T)for(let l of T){if(l+="",l.startsWith("-"))throw new Error(`Invalid entry point: ${l}`);o.push(l)}if(R){let l=Object.create(null),d=n(R,l,"contents",g),O=n(R,l,"resolveDir",g),v=n(R,l,"sourcefile",g),B=n(R,l,"loader",g);j(R,l),v&&o.push(`--sourcefile=${v}`),B&&o.push(`--loader=${B}`),O&&(p=O+""),y=d?d+"":""}return[o,h,x,y,p,m]}function Se(e,r,t){let s=[],o=Object.create(null);Q(s,e,o,r,t),ce(s,e,o);let i=n(e,o,"sourcemap",le),y=n(e,o,"tsconfigRaw",ve),p=n(e,o,"sourcefile",g),a=n(e,o,"loader",g);return j(e,o),i&&s.push(`--sourcemap=${i===!0?"external":i}`),y&&s.push(`--tsconfig-raw=${typeof y=="string"?y:JSON.stringify(y)}`),p&&s.push(`--sourcefile=${p}`),a&&s.push(`--loader=${a}`),s}function pe(e){let r=new Map,t=new Map,s=new Map,o=0,i=!1,y=0,p=0,a=new Uint8Array(16*1024),S=0,k=c=>{let u=S+c.length;if(u>a.length){let b=new Uint8Array(u*2);b.set(a),a=b}a.set(c,S),S+=c.length;let f=0;for(;f+4<=S;){let b=ne(a,f);if(f+4+b>S)break;f+=4,N(a.slice(f,f+b)),f+=b}f>0&&(a.set(a.slice(f)),S-=f)},I=()=>{i=!0;for(let c of r.values())c("The service was stopped",null);r.clear();for(let c of s.values())c.onWait("The service was stopped");s.clear()},E=(c,u)=>{if(i)return u("The service is no longer running",null);let f=y++;r.set(f,u),e.writeToStdin(re({id:f,isRequest:!0,value:c}))},A=(c,u)=>{if(i)throw new Error("The service is no longer running");e.writeToStdin(re({id:c,isRequest:!1,value:u}))},C=async(c,u)=>{try{switch(u.command){case"resolve":{let f=t.get(u.key);A(c,await f(u));break}case"load":{let f=t.get(u.key);A(c,await f(u));break}case"serve-request":{let f=s.get(u.serveID);A(c,{}),f&&f.onRequest&&f.onRequest(u.args);break}case"serve-wait":{let f=s.get(u.serveID);A(c,{}),f&&f.onWait(u.error);break}default:throw new Error("Invalid command: "+u.command)}}catch(f){A(c,{errors:[await Z(f,e)]})}},q=!0,N=c=>{if(q){q=!1;let f=String.fromCharCode(...c);if(f!=="0.8.21")throw new Error(`Cannot start service: Host version "0.8.21" does not match binary version ${JSON.stringify(f)}`);return}let u=ae(c);if(u.isRequest)C(u.id,u.value);else{let f=r.get(u.id);r.delete(u.id),u.value.error?f(u.value.error,{}):f(null,u.value)}},K=(c,u,f)=>{if(e.isSync)throw new Error("Cannot use plugins in synchronous API calls");let b={},F={},T=0,R=0;u.plugins=[];for(let h of c){let m=h.name,x=h.setup,w={name:m+"",onResolve:[],onLoad:[]};if(typeof m!="string"||m==="")throw new Error(`Plugin at index ${R} is missing a name`);if(typeof x!="function")throw new Error(`[${w.name}] Missing a setup function`);R++,x({onResolve(l,d){let O={},v=n(l,O,"filter",fe),B=n(l,O,"namespace",g);if(j(l,O),v==null)throw new Error(`[${w.name}] "onResolve" is missing a filter`);let $=T++;b[$]=d,w.onResolve.push({id:$,filter:v.source,namespace:B||""})},onLoad(l,d){let O={},v=n(l,O,"filter",fe),B=n(l,O,"namespace",g);if(j(l,O),v==null)throw new Error(`[${w.name}] "onLoad" is missing a filter`);let $=T++;F[$]=d,w.onLoad.push({id:$,filter:v.source,namespace:B||""})}}),u.plugins.push(w)}return t.set(f,async h=>{switch(h.command){case"resolve":{let m={};for(let x of h.ids)try{let w=b[x],l=await w({path:h.path,importer:h.importer,namespace:h.namespace,resolveDir:h.resolveDir});if(l!=null){if(typeof l!="object")throw new Error("Expected resolver plugin to return an object");let d={},O=n(l,d,"pluginName",g),v=n(l,d,"path",g),B=n(l,d,"namespace",g),$=n(l,d,"external",P),U=n(l,d,"errors",L),D=n(l,d,"warnings",L);j(l,d),m.id=x,O!=null&&(m.pluginName=O),v!=null&&(m.path=v),B!=null&&(m.namespace=B),$!=null&&(m.external=$),U!=null&&(m.errors=X(U)),D!=null&&(m.warnings=X(D));break}}catch(w){return{id:x,errors:[await Z(w,e)]}}return m}case"load":{let m={};for(let x of h.ids)try{let w=F[x],l=await w({path:h.path,namespace:h.namespace});if(l!=null){if(typeof l!="object")throw new Error("Expected loader plugin to return an object");let d={},O=n(l,d,"pluginName",g),v=n(l,d,"contents",xe),B=n(l,d,"resolveDir",g),$=n(l,d,"loader",g),U=n(l,d,"errors",L),D=n(l,d,"warnings",L);j(l,d),m.id=x,O!=null&&(m.pluginName=O),v instanceof Uint8Array?m.contents=v:v!=null&&(m.contents=W(v)),B!=null&&(m.resolveDir=B),$!=null&&(m.loader=$),U!=null&&(m.errors=X(U)),D!=null&&(m.warnings=X(D));break}}catch(w){return{id:x,errors:[await Z(w,e)]}}return m}default:throw new Error("Invalid command: "+h.command)}}),()=>t.delete(f)},M=(c,u)=>{let f={},b=n(c,f,"port",z),F=n(c,f,"host",g),T=n(c,f,"onRequest",we),R=o++,h,m=new Promise((x,w)=>{h=l=>{s.delete(R),l!==null?w(new Error(l)):x()}});return u.serve={serveID:R},j(c,f),b!==void 0&&(u.serve.port=b),F!==void 0&&(u.serve.host=F),s.set(R,{onRequest:T,onWait:h}),{wait:m,stop(){E({command:"serve-stop",serveID:R},()=>{})}}};return{readFromStdout:k,afterClose:I,service:{buildOrServe(c,u,f,b){let F="info";try{let T=p++,R=!e.isBrowser,[h,m,x,w,l,d]=Oe(u,f,F,R),O={command:"build",key:T,flags:h,write:m,stdin:w,resolveDir:l,incremental:d},v=c&&M(c,O),B=x&&x.length>0&&K(x,O,T),$,U=(D,_)=>{let J=D.errors,H=D.warnings;if(J.length>0)return _(de("Build failed",J,H),null);let Y={warnings:H};if(D.outputFiles&&(Y.outputFiles=D.outputFiles.map(Ee)),D.rebuildID!==void 0){if(!$){let ie=!1;$=()=>new Promise((me,ge)=>{if(ie||i)throw new Error("Cannot rebuild");E({command:"rebuild",rebuildID:D.rebuildID},(oe,ye)=>{if(oe)return _(new Error(oe),null);U(ye,(se,he)=>{se?ge(se):me(he)})})}),$.dispose=()=>{ie=!0,B&&B(),E({command:"rebuild-dispose",rebuildID:D.rebuildID},()=>{})}}Y.rebuild=$}return _(null,Y)};if(m&&e.isBrowser)throw new Error('Cannot enable "write" in the browser');if(d&&e.isSync)throw new Error('Cannot use "incremental" with a synchronous build');E(O,(D,_)=>{if(D)return b(new Error(D),null);if(v){let J=_,H={port:J.port,host:J.host,wait:v.wait,stop:v.stop};return b(null,H)}return B&&!d&&B(),U(_,b)})}catch(T){let R=[];try{Q(R,u,{},f,F)}catch(h){}E({command:"error",flags:R,error:Z(T,e)},()=>{b(T,null)})}},transform(c,u,f,b,F){let T="silent",R=h=>{try{let m=Se(u,f,T),x={command:"transform",flags:m,inputFS:h!==null,input:h!==null?h:c+""};E(x,(w,l)=>{if(w)return F(new Error(w),null);let d=l.errors,O=l.warnings,v=1,B=()=>--v===0&&F(null,{warnings:O,code:l.code,map:l.map});if(d.length>0)return F(de("Transform failed",d,O),null);l.codeFS&&(v++,b.readFile(l.code,($,U)=>{$!==null?F($,null):(l.code=U,B())})),l.mapFS&&(v++,b.readFile(l.map,($,U)=>{$!==null?F($,null):(l.map=U,B())})),B()})}catch(m){let x=[];try{Q(x,u,{},f,T)}catch(w){}E({command:"error",flags:x,error:Z(m,e)},()=>{F(m,null)})}};if(typeof c=="string"&&c.length>1024*1024){let h=R;R=()=>b.writeFile(c,h)}R(null)}}}}function Z(e,r){let t="Internal error",s=null;try{t=(e&&e.message||e)+""}catch(o){}try{let o=e.stack+"",i=o.split(`
`,3),y="    at ";if(r.readFileSync&&!i[0].startsWith(y)&&i[1].startsWith(y)){let p=i[1].slice(y.length);for(;;){let a=/^\S+ \((.*)\)$/.exec(p);if(a){p=a[1];continue}if(a=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(p),a){p=a[1];continue}if(a=/^(\S+):(\d+):(\d+)$/.exec(p),a){let S=r.readFileSync(a[1],"utf8"),k=S.split(/\r\n|\r|\n|\u2028|\u2029/)[+a[2]-1]||"";s={file:a[1],namespace:"file",line:+a[2],column:+a[3]-1,length:0,lineText:k+`
`+i.slice(1).join(`
`)}}break}}}catch(o){}return{text:t,location:s}}function de(e,r,t){let s=5,o=r.length<1?"":` with ${r.length} error${r.length<2?"":"s"}:`+r.slice(0,s+1).map((y,p)=>{if(p===s)return`
...`;if(!y.location)return`
error: ${y.text}`;let{file:a,line:S,column:k}=y.location;return`
${a}:${S}:${k}: error: ${y.text}`}).join(""),i=new Error(`${e}${o}`);return i.errors=r,i.warnings=t,i}function X(e){let r=[];for(let t of e){let s={},o=n(t,s,"text",g),i=n(t,s,"location",be);j(t,s);let y=null;if(i!=null){let p={},a=n(i,p,"file",g),S=n(i,p,"namespace",g),k=n(i,p,"line",z),I=n(i,p,"column",z),E=n(i,p,"length",z),A=n(i,p,"lineText",g);j(i,p),y={file:a||"",namespace:S||"",line:k||0,column:I||0,length:E||0,lineText:A||""}}r.push({text:o||"",location:y})}return r}function Ee({path:e,contents:r}){let t=null;return{path:e,contents:r,get text(){return t===null&&(t=V(r)),t}}}var $e="0.8.21",Be=()=>{throw new Error('The "build" API only works in node')},ke=()=>{throw new Error('The "serve" API only works in node')},Ae=()=>{throw new Error('The "transform" API only works in node')},Fe=()=>{throw new Error('The "buildSync" API only works in node')},Te=()=>{throw new Error('The "transformSync" API only works in node')},De=e=>{if(!e)throw new Error('Must provide an options object to "startService"');let r=e.wasmURL;if(!r)throw new Error('Must provide the "wasmURL" option');return r+="",fetch(r).then(t=>{if(!t.ok)throw new Error(`Failed to download ${JSON.stringify(r)}`);return t.arrayBuffer()}).then(t=>{let s='{let global={};for(let o=self;o;o=Object.getPrototypeOf(o))for(let k of Object.getOwnPropertyNames(o))global[k]=self[k];\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\n(()=>{if(!(typeof global!="undefined"))if(typeof window!="undefined")window.global=window;else if(typeof self!="undefined")self.global=self;else throw new Error("cannot export Go (neither global, window nor self is defined)");if(!global.require&&typeof require!="undefined"&&(global.require=require),!global.fs&&global.require){const r=require("fs");Object.keys(r)!==0&&(global.fs=r)}const l=()=>{const r=new Error("not implemented");return r.code="ENOSYS",r};if(!global.fs){let r="";global.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(n,s){r+=g.decode(s);const i=r.lastIndexOf(`\n`);return i!=-1&&(console.log(r.substr(0,i)),r=r.substr(i+1)),s.length},write(n,s,i,c,f,u){if(i!==0||c!==s.length||f!==null){u(l());return}const h=this.writeSync(n,s);u(null,h)},chmod(n,s,i){i(l())},chown(n,s,i,c){c(l())},close(n,s){s(l())},fchmod(n,s,i){i(l())},fchown(n,s,i,c){c(l())},fstat(n,s){s(l())},fsync(n,s){s(null)},ftruncate(n,s,i){i(l())},lchown(n,s,i,c){c(l())},link(n,s,i){i(l())},lstat(n,s){s(l())},mkdir(n,s,i){i(l())},open(n,s,i,c){c(l())},read(n,s,i,c,f,u){u(l())},readdir(n,s){s(l())},readlink(n,s){s(l())},rename(n,s,i){i(l())},rmdir(n,s){s(l())},stat(n,s){s(l())},symlink(n,s,i){i(l())},truncate(n,s,i){i(l())},unlink(n,s){s(l())},utimes(n,s,i,c){c(l())}}}if(global.process||(global.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw l()},pid:-1,ppid:-1,umask(){throw l()},cwd(){throw l()},chdir(){throw l()}}),!global.crypto){const r=require("crypto");global.crypto={getRandomValues(n){r.randomFillSync(n)}}}global.performance||(global.performance={now(){const[r,n]=process.hrtime();return r*1e3+n/1e6}}),global.TextEncoder||(global.TextEncoder=require("util").TextEncoder),global.TextDecoder||(global.TextDecoder=require("util").TextDecoder);const d=new TextEncoder("utf-8"),g=new TextDecoder("utf-8");if(global.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const r=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},n=e=>{const t=this.mem.getUint32(e+0,!0),o=this.mem.getInt32(e+4,!0);return t+o*4294967296},s=e=>{const t=this.mem.getFloat64(e,!0);if(t===0)return;if(!isNaN(t))return t;const o=this.mem.getUint32(e,!0);return this._values[o]},i=(e,t)=>{const o=2146959360;if(typeof t=="number"&&t!==0){if(isNaN(t)){this.mem.setUint32(e+4,o,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(t===void 0){this.mem.setFloat64(e,0,!0);return}let a=this._ids.get(t);a===void 0&&(a=this._idPool.pop(),a===void 0&&(a=this._values.length),this._values[a]=t,this._goRefCounts[a]=0,this._ids.set(t,a)),this._goRefCounts[a]++;let m=0;switch(typeof t){case"object":t!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(e+4,o|m,!0),this.mem.setUint32(e,a,!0)},c=e=>{const t=n(e+0),o=n(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,o)},f=e=>{const t=n(e+0),o=n(e+8),a=new Array(o);for(let m=0;m<o;m++)a[m]=s(t+m*8);return a},u=e=>{const t=n(e+0),o=n(e+8);return g.decode(new DataView(this._inst.exports.mem.buffer,t,o))},h=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{const t=n(e+8),o=n(e+16),a=this.mem.getInt32(e+24,!0);fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,o,a))},"runtime.resetMemoryDataView":e=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{r(e+8,(h+performance.now())*1e6)},"runtime.walltime1":e=>{const t=new Date().getTime();r(e+8,t/1e3),this.mem.setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{const t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},n(e+8)+1)),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{crypto.getRandomValues(c(e+8))},"syscall/js.finalizeRef":e=>{const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,this._goRefCounts[t]===0){const o=this._values[t];this._values[t]=null,this._ids.delete(o),this._idPool.push(t)}},"syscall/js.stringVal":e=>{i(e+24,u(e+8))},"syscall/js.valueGet":e=>{const t=Reflect.get(s(e+8),u(e+16));e=this._inst.exports.getsp(),i(e+32,t)},"syscall/js.valueSet":e=>{Reflect.set(s(e+8),u(e+16),s(e+32))},"syscall/js.valueDelete":e=>{Reflect.deleteProperty(s(e+8),u(e+16))},"syscall/js.valueIndex":e=>{i(e+24,Reflect.get(s(e+8),n(e+16)))},"syscall/js.valueSetIndex":e=>{Reflect.set(s(e+8),n(e+16),s(e+24))},"syscall/js.valueCall":e=>{try{const t=s(e+8),o=Reflect.get(t,u(e+16)),a=f(e+32),m=Reflect.apply(o,t,a);e=this._inst.exports.getsp(),i(e+56,m),this.mem.setUint8(e+64,1)}catch(t){i(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{try{const t=s(e+8),o=f(e+16),a=Reflect.apply(t,void 0,o);e=this._inst.exports.getsp(),i(e+40,a),this.mem.setUint8(e+48,1)}catch(t){i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{try{const t=s(e+8),o=f(e+16),a=Reflect.construct(t,o);e=this._inst.exports.getsp(),i(e+40,a),this.mem.setUint8(e+48,1)}catch(t){i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{r(e+16,parseInt(s(e+8).length))},"syscall/js.valuePrepareString":e=>{const t=d.encode(String(s(e+8)));i(e+16,t),r(e+24,t.length)},"syscall/js.valueLoadString":e=>{const t=s(e+8);c(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{this.mem.setUint8(e+24,s(e+8)instanceof s(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{const t=c(e+8),o=s(e+32);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const a=o.subarray(0,t.length);t.set(a),r(e+40,a.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{const t=s(e+8),o=c(e+16);if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const a=o.subarray(0,t.length);t.set(a),r(e+40,a.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}async run(r){this._inst=r,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,global,this],this._goRefCounts=new Array(this._values.length).fill(Infinity),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[global,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const s=h=>{const e=n,t=d.encode(h+"\\0");return new Uint8Array(this.mem.buffer,n,t.length).set(t),n+=t.length,n%8!==0&&(n+=8-n%8),e},i=this.argv.length,c=[];this.argv.forEach(h=>{c.push(s(h))}),c.push(0);const f=Object.keys(this.env).sort();f.forEach(h=>{c.push(s(`${h}=${this.env[h]}`))}),c.push(0);const u=n;c.forEach(h=>{this.mem.setUint32(n,h,!0),this.mem.setUint32(n+4,0,!0),n+=8}),this._inst.exports.run(i,u),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(r){const n=this;return function(){const s={id:r,this:this,args:arguments};return n._pendingEvent=s,n._resume(),s.result}}},global.require&&global.require.main===module&&global.process&&global.process.versions&&!global.process.versions.electron){process.argv.length<3&&(console.error("usage: go_js_wasm_exec [wasm binary] [arguments]"),process.exit(1));const r=new Go;r.argv=process.argv.slice(2),r.env=Object.assign({TMPDIR:require("os").tmpdir()},process.env),r.exit=process.exit,WebAssembly.instantiate(fs.readFileSync(process.argv[2]),r.importObject).then(n=>(process.on("exit",s=>{s===0&&!r.exited&&(r._pendingEvent={id:0},r._resume())}),r.run(n.instance))).catch(n=>{console.error(n),process.exit(1)})}})();\nonmessage=({data:c})=>{let y=new TextDecoder,s=global.fs,a="";s.writeSync=(e,t)=>{if(e===1)self.postMessage(t);else if(e===2){a+=y.decode(t);let n=a.split(`\n`);n.length>1&&console.log(n.slice(0,-1).join(`\n`)),a=n[n.length-1]}else throw new Error("Bad write");return t.length};let l=[],i,r=0;onmessage=({data:e})=>{e.length>0&&(l.push(e),i&&i())},s.read=(e,t,n,d,u,m)=>{if(e!==0||n!==0||d!==t.length||u!==null)throw new Error("Bad read");if(l.length===0){i=()=>s.read(e,t,n,d,u,m);return}let g=l[0],h=Math.max(0,Math.min(d,g.length-r));t.set(g.subarray(r,r+h),n),r+=h,r===g.length&&(l.shift(),r=0),m(null,h)};let o=new global.Go;o.argv=["","--service=0.8.21"],WebAssembly.instantiate(c,o.importObject).then(({instance:e})=>o.run(e))};}',o;if(e.worker!==!1){let a=new Blob([s],{type:"application/javascript"});o=new Worker(URL.createObjectURL(a))}else{let a=new Function("postMessage",s+"var onmessage; return m => onmessage(m)"),S=a(k=>o.onmessage({data:k}));o={onmessage:null,postMessage:k=>S({data:k}),terminate(){}}}o.postMessage(t),o.onmessage=({data:a})=>i(a);let{readFromStdout:i,afterClose:y,service:p}=pe({writeToStdin(a){o.postMessage(a)},isSync:!1,isBrowser:!0});return{build:a=>new Promise((S,k)=>p.buildOrServe(null,a,!1,(I,E)=>I?k(I):S(E))),transform:(a,S)=>new Promise((k,I)=>p.transform(a,S||{},!1,{readFile(E,A){A(new Error("Internal error"),null)},writeFile(E,A){A(null)}},(E,A)=>E?I(E):k(A))),serve(){throw new Error('The "serve" API only works in node')},stop(){o.terminate(),y()}}})};export{Be as build,Fe as buildSync,ke as serve,De as startService,Ae as transform,Te as transformSync,$e as version};